.panel.panel-default
  .panel-heading.text-center
    - path = nil
    - if current_user.admin?
      - path = validations_path
    - else
      - path = :back
    = link_to path do
      %span.glyphicon.glyphicon-chevron-left
        Retour vers la page précédente
  .panel-body
    .panel.panel-default
      .panel-heading
        .text-heading.text-center
          %a{"data-parent" => "#main", "data-toggle" => "collapse", :href => "#status"}
            .row
              .col-md-4
                Crédits:
                .badge
                  = @student_program.count_credits
              .col-md-4
                Minimum:
                .label.label-success 
                  = @student_program.program.min
              .col-md-4
                Maximum:
                .label.label-danger
                  = @student_program.program.max
      #status.panel-collapse.collapse.in
        .panel-body
          - percentages = @student_program.credits_percentages

          = render 'status_messages', percentages: percentages
          
          .progress
            .progress-bar.progress-bar-success{"aria-valuemax" => @program.min, "aria-valuemin" => "0", "aria-valuenow" => @student_program.count_credits, :role => "progressbar", :style => "width:"+percentages[:min].to_s+"%;"}
              = @student_program.count_credits
              \/
              = @student_program.program.min.to_s
              crédits
            .progress-bar.progress-bar-warning{"aria-valuemax" => @program.max, "aria-valuemin" => "0", "aria-valuenow" => @student_program.count_credits, :role => "progressbar", :style => "width:"+percentages[:max].to_s+"%;"}

            .progress-bar.progress-bar-danger{"aria-valuemax" => @program.max+@program.min, "aria-valuemin" => "0", "aria-valuenow" => @student_program.count_credits, :role => "progressbar", :style => "width:"+percentages[:overflow].to_s+"%;"}


    .panel.panel-default
      .panel-heading
        .text-heading.text-center
          %a{"data-parent" => "#main", "data-toggle" => "collapse", :href => "#dependancies"}
            Dépendances Manquantes (
            = @count
            )
      #dependancies.panel-collapse.collapse
        .panel-body

          %ul.nav.nav-tabs
            %li.active
              %a{"data-toggle" => "tab", :href => "#pre"} Prérequis Manquants
            %li
              %a{"data-toggle" => "tab", :href => "#co"} Corequis Manquants
            %li
              %a{"data-toggle" => "tab", :href => "#mandatory"} Cours Obligatoires Manquants
            %li
              %a{"data-toggle" => "tab", :href => "#or_co"} Corequis Disjonctifs (OR)
            %li
              %a{"data-toggle" => "tab", :href => "#or_pre"} Prerequis Disjonctifs (Or)
            %li
              %a{"data-toggle" => "tab", :href => "#xor_co"} Corequis Disjonctifs Exclusif (XOR)
            %li
              %a{"data-toggle" => "tab", :href => "#xor_pre"} Prerequis Disjonctifs Exclusif (XOR)

          .tab-content
            #pre.tab-pane.active
              = render "courses", courses: @prerequisites
            #co.tab-pane
              = render "courses", courses: @corequisites
            #mandatory.tab-pane
              = render "courses", courses: @mandatories
            #or_co.tab-pane
              - @or_corequisites.each do |o|
                .panel.panel-default
                  .panel-heading
                    Il vous manque un des corequis suivants
                  .panel-body
                    = render "courses",courses: o
            #or_pre.tab-pane
              - @or_prerequisites.each do |o|
                .panel.panel-default
                  .panel-heading
                    Il vous manque un des prerequis suivants
                  .panel-body
                    = render "courses", courses: o
            #xor_pre.tab-pane
              - @xor_prerequisites.each do |o|
                .panel.panel-default
                  .panel-heading
                    Vous ne pouvez choisir qu'un seul des prérequis suivants
                  .panel-body
                    = render "courses", courses: o
            #xor_co.tab-pane
              - @xor_corequisites.each do |o|
                .panel.panel-default
                  .panel-heading
                    Vous ne pouvez choisir qu'un seul des corequis suivants
                  .panel-body
                    = render "courses", courses: o